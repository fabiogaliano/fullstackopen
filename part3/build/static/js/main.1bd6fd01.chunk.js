(this.webpackJsonpthe_phonebook=this.webpackJsonpthe_phonebook||[]).push([[0],{18:function(e,t,n){e.exports=n(41)},23:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),o=n.n(c),u=(n(23),n(16)),l=n(17),i=n(2),m=n(4),d=n.n(m),s="/api/persons",f=function(){return d.a.get(s)},h=function(e){return d.a.post(s,e)},b=function(e,t){return d.a.put("".concat(s,"/").concat(e),t)},p=function(e){return d.a.delete("".concat(s,"/").concat(e))},g=function(e){var t=e.text,n=e.value,a=e.handleChange;return r.a.createElement(r.a.Fragment,null,t," ",r.a.createElement("input",{value:n,onChange:a}))},E=function(e){var t=e.handleSubmit,n=e.name,a=e.handleNameChange,c=e.number,o=e.handleNumberChange;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement(g,{text:"name:",value:n,handleChange:a}),r.a.createElement("br",null),r.a.createElement(g,{text:"number:",value:c,handleChange:o})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},v=function(e){var t=e.text;return r.a.createElement("h2",null,t)},w=function(e){var t=e.name,n=e.number,a=e.handleClick;return r.a.createElement("li",null,"".concat(t," ").concat(n)," ",r.a.createElement("button",{onClick:function(){return a()}},"delete")," ")},C=function(e){var t=e.persons,n=e.deletePerson;return r.a.createElement("ul",{style:{listStyleType:"none",margin:0,padding:0}},t.map((function(e){return r.a.createElement(w,{key:e.name,name:e.name,number:e.number,handleClick:function(){return n(e)}})})))},O=function(e){var t=e.message,n={background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return e.error?(n.color="red",r.a.createElement("p",{style:n},t)):(n.color="green",r.a.createElement("p",{style:n},t))},j=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),m=Object(i.a)(o,2),d=m[0],s=m[1],w=Object(a.useState)(""),j=Object(i.a)(w,2),x=j[0],y=j[1],k=Object(a.useState)(""),S=Object(i.a)(k,2),N=S[0],L=S[1],P=Object(a.useState)(""),T=Object(i.a)(P,2),B=T[0],D=T[1];Object(a.useEffect)((function(){f().then((function(e){var t=e.data;return c(t)}))}),[]);return r.a.createElement("div",null,r.a.createElement(v,{text:"Phonebook"}),B?r.a.createElement(O,{message:B.message,error:B.error}):null," ",r.a.createElement(g,{text:"filter shown with",value:N,handleChange:function(e){L(e.target.value)}}),r.a.createElement("h3",null,"add a new"),r.a.createElement(E,{handleSubmit:function(e){e.preventDefault();var t=n.find((function(e){return e.name===d}));t?window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))&&b(t.id,Object(l.a)({},t,{number:x})).then((function(e){if(200===e.status){var a=n.indexOf(t),r=Object(u.a)(n);r.splice(a,1,e.data),c(r)}})).catch(console.error):h({name:d,number:x}).then((function(e){var t=e.data;c(n.concat(t)),s(""),y(""),D({message:"Added ".concat(d),error:!1}),setTimeout((function(){D(null)}),5e3)}))},name:d,handleNameChange:function(e){s(e.target.value)},number:x,handleNumberChange:function(e){y(e.target.value)}}),r.a.createElement(v,{text:"Numbers"}),N?r.a.createElement(C,{persons:n.filter((function(e){return e.name.toLowerCase().includes(N.toLocaleLowerCase())}))}):r.a.createElement(C,{persons:n,deletePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&p(e.id).then((function(t){if(204===t.status){var a=n.filter((function(t){return!(t.id===e.id)}));c(a)}})).catch((function(t){D({message:"".concat(e.name," was already removed from the server"),error:!0}),setTimeout((function(){D(null)}),5e3)}))}}))};o.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.1bd6fd01.chunk.js.map