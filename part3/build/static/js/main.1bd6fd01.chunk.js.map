{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","newObject","post","id","put","delete","Input","text","value","handleChange","onChange","PersonForm","handleSubmit","name","handleNameChange","number","handleNumberChange","onSubmit","type","SubHeader","Person","handleClick","onClick","Persons","persons","deletePerson","style","listStyleType","margin","padding","map","person","key","Notifications","message","styling","background","fontSize","borderStyle","borderRadius","marginBottom","error","color","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","newSearch","setSearch","notifications","setNotifications","useEffect","personService","then","data","e","target","preventDefault","personExists","find","window","confirm","res","status","index","indexOf","updatedPersons","splice","catch","console","concat","setTimeout","filter","toLowerCase","includes","toLocaleLowerCase","updateState","x","err","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1bd6fd01.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  return axios.get(baseUrl);\n};\n\nconst create = (newObject) => {\n  return axios.post(baseUrl, newObject);\n};\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject);\n};\n\nconst deleteObj = (id) => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\nexport default {\n  getAll,\n  create,\n  update,\n  deleteObj,\n};\n","import React, { useState, useEffect } from \"react\";\nimport personService from \"./services/persons\";\n\nconst Input = ({ text, value, handleChange }) => (\n  <>\n    {text} <input value={value} onChange={handleChange} />\n  </>\n);\n\nconst PersonForm = ({\n  handleSubmit,\n  name,\n  handleNameChange,\n  number,\n  handleNumberChange,\n}) => (\n  <form onSubmit={handleSubmit}>\n    <div>\n      <Input text=\"name:\" value={name} handleChange={handleNameChange} />\n      <br />\n      <Input text=\"number:\" value={number} handleChange={handleNumberChange} />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n);\n\nconst SubHeader = ({ text }) => <h2>{text}</h2>;\n\nconst Person = ({ name, number, handleClick }) => (\n  <li>\n    {`${name} ${number}`} <button onClick={() => handleClick()}>delete</button>{\" \"}\n  </li>\n);\n\nconst Persons = ({ persons, deletePerson }) => {\n  return (\n    <ul style={{ listStyleType: \"none\", margin: 0, padding: 0 }}>\n      {persons.map((person) => (\n        <Person\n          key={person.name}\n          name={person.name}\n          number={person.number}\n          handleClick={() => deletePerson(person)}\n        />\n      ))}\n    </ul>\n  );\n};\n\nconst Notifications = ({ message, error }) => {\n  const styling = {\n    background: \"lightgrey\",\n    fontSize: \"20px\",\n    borderStyle: \"solid\",\n    borderRadius: \"5px\",\n    padding: \"10px\",\n    marginBottom: \"10px\",\n  };\n\n  if (error) {\n    styling.color = \"red\";\n    return <p style={styling}>{message}</p>;\n  } else {\n    styling.color = \"green\";\n    return <p style={styling}>{message}</p>;\n  }\n};\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newSearch, setSearch] = useState(\"\");\n  const [notifications, setNotifications] = useState(\"\");\n\n  useEffect(() => {\n    personService.getAll().then(({ data }) => setPersons(data));\n  }, []);\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const handleSearchChange = (e) => {\n    setSearch(e.target.value);\n  };\n\n  const addPerson = (e) => {\n    e.preventDefault();\n\n    const searchPerson = ({ name }) => name === newName;\n    const personExists = persons.find(searchPerson);\n    if (personExists) {\n      const changeNumberConfirm = window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one?`\n      );\n      if (changeNumberConfirm) {\n        personService\n          .update(personExists.id, {\n            ...personExists,\n            number: newNumber,\n          })\n          .then((res) => {\n            if (res.status === 200) {\n              let index = persons.indexOf(personExists);\n              let updatedPersons = [...persons];\n              updatedPersons.splice(index, 1, res.data);\n              setPersons(updatedPersons);\n            }\n          })\n          .catch(console.error);\n      }\n    } else {\n      const newPerson = { name: newName, number: newNumber };\n      personService.create(newPerson).then(({ data }) => {\n        setPersons(persons.concat(data));\n        setNewName(\"\");\n        setNewNumber(\"\");\n        setNotifications({ message: `Added ${newName}`, error: false });\n        setTimeout(() => {\n          setNotifications(null);\n        }, 5000);\n      });\n\n      return;\n    }\n  };\n\n  const deletePerson = (person) => {\n    const deleteConfirmation = window.confirm(`Delete ${person.name}?`);\n    if (deleteConfirmation) {\n      personService\n        .deleteObj(person.id)\n        .then((res) => {\n          if (res.status === 204) {\n            const updateState = persons.filter((x) => !(x.id === person.id));\n            setPersons(updateState);\n          }\n        })\n        .catch((err) => {\n          setNotifications({\n            message: `${person.name} was already removed from the server`,\n            error: true,\n          });\n          setTimeout(() => {\n            setNotifications(null);\n          }, 5000);\n        });\n    }\n  };\n\n  const searchFilter = () => {\n    const searchPerson = (person) =>\n      person.name.toLowerCase().includes(newSearch.toLocaleLowerCase());\n    return persons.filter(searchPerson);\n  };\n\n  return (\n    <div>\n      <SubHeader text=\"Phonebook\" />\n      {notifications ? (\n        <Notifications\n          message={notifications.message}\n          error={notifications.error}\n        />\n      ) : null}{\" \"}\n      <Input\n        text=\"filter shown with\"\n        value={newSearch}\n        handleChange={handleSearchChange}\n      />\n      <h3>add a new</h3>\n      <PersonForm\n        handleSubmit={addPerson}\n        name={newName}\n        handleNameChange={handleNameChange}\n        number={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <SubHeader text=\"Numbers\" />\n      {newSearch ? (\n        <Persons persons={searchFilter()} />\n      ) : (\n        <Persons persons={persons} deletePerson={deletePerson} />\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}